<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
#macro( status $activity )
	<span class='$activity.Status.ToString().ToLower()'>$activity.Status</span>
#end
#macro( statusImage $activity )
	<span class='$activity.Status.ToString().ToLower()'>
		<img title='Status: $activity.Status' alt='$activity.Status' src='/CrystalQuartzPanel.axd?file=CrystalQuartz.Web.Content.Images.status${activity.Status}.png&type=png'>
	</span>
#end
#macro(date $dateObject)
	#if ($dateObject == $null)
		<span class='none'>[none]</span>
	#else
		$dateObject
	#end
#end

<html xmlns='http://www.w3.org/1999/xhtml'>
    <head>
        <title>CrystalQuartz Panel</title>
        <link href='/CrystalQuartzPanel.axd?file=CrystalQuartz.Web.Content.main.css&type=css' rel='stylesheet' type='text/css' />
    </head>
    <body>
        <div id='mainHeader'>
            <a href='/'>&larr; return to the site</a>
            <h1>CrystalQuartz Panel</h1>
        </div>
        <div id='mainContent'>
            <div id='schedulerProperties' class='simplePanel'>
				<h2>Scheduler properties</h2>
				<div class='primary'>
					<table>
						<tr>
							<th>Name:</th>
							<td>$data.Name</td>
						</tr>
						<tr>
							<th>Status:</th>
							<td>
								<span class='$data.Status.ToString().ToLower()'>$data.Status</span>
								<a href="/CrystalQuartzPanel.axd?command=scheduler-stop">Shutdown</a>
								#if ($data.CanStart)
									<a href="/CrystalQuartzPanel.axd?command=scheduler-start">Start</a>
								#end
							</td>
						</tr>
						<tr>
							<th>Instance ID:</th>
							<td>$data.InstanceId</td>
						</tr>
					</table>        
				</div>
				<div class='secondary'></div>
			</div>
			
			<div id='jobsContainer'>
				#foreach($group in $data.JobGroups)
				#nodata
					No jobs found
				#each
					<h2 class='groupHeader'>
						$group.Name
						<div class='status'>
							#if ($group.CanPause)
								<a href="/CrystalQuartzPanel.axd?command=group-pause&group=${group.Name}">Pause all</a> |
							#end
							#if ($group.CanStart)
								<a href="/CrystalQuartzPanel.axd?command=group-resume&group=${group.Name}">Resume all</a> |
							#end
							#statusImage($group)
						</div>
					</h2>
					
					#foreach($job in $group.Jobs)
					#each
						#parse("CrystalQuartz.Web.Templates.jobPanel.vm")
					#end
				#end
			</div>
        </div>
    </body>
</html>